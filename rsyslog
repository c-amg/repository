
# 查询是否安装
[root@Centos8 ~]# rpm -qa |grep rsyslog
rsyslog-8.1911.0-7.el8.x86_64
# 如果未安装使用以下命令安装即可
yum install rsyslog


修改配置文件
vim /etc/rsyslog.conf

[root@Centos8 etc]# cat rsyslog.conf 
# rsyslog configuration file    #日志记录工具配置文件


# For more information see /usr/share/doc/rsyslog-*/rsyslog_conf.html             # 有关更多信息请查询此目录文件
# or latest version online at http://www.rsyslog.com/doc/rsyslog_conf.html        # 或最新版本
# If you experience problems, see http://www.rsyslog.com/doc/troubleshoot.html    # 如果你遇到问题，请参阅此链接

#### MODULES ####    # 模块

module(load="imuxsock"    # provides support for local system logging (e.g. via logger command)        # 提供对本地日志的支持
       SysSock.Use="off") # Turn off message reception via local log socket;  # 通过本地日志套接字关闭消息接收
                          # local messages are retrieved through imjournal now.  #  现在通过Imjournal检索本地消息
module(load="imjournal"             # provides access to the systemd journal     # 提供对Systemd Journal的访问
       StateFile="imjournal.state") # File to store the position in the journal  # 存放在日志中的位置
#module(load="imklog") # reads kernel messages (the same are read from journald)  # 读取内核消息
#module(load="immark") # provides --MARK-- message capability

# Provides UDP syslog reception        # UDP提供系统日志接收
# for parameters see http://www.rsyslog.com/doc/imudp.html   # 参数查看
module(load="imudp") # needs to be done just once   # 只需要做一次                                           # 取消此注释进行UDP监听514端口传输日志
input(type="imudp" port="514")       

# Provides TCP syslog reception     # 提供TCPsyslog的接收
# for parameters see http://www.rsyslog.com/doc/imtcp.html  #参数查看此网页
module(load="imtcp") # needs to be done just once                                                           # 取消此注释进行TCP监听514端口传输日志
input(type="imtcp" port="514")

#### GLOBAL DIRECTIVES ####  # 全局模块

# Where to place auxiliary files  # 放置辅助文件的位置
global(workDirectory="/var/lib/rsyslog")   

# Use default timestamp format   # 使用默认的时间戳
module(load="builtin:omfile" Template="RSYSLOG_TraditionalFileFormat")

# Include all config files in /etc/rsyslog.d/
include(file="/etc/rsyslog.d/*.conf" mode="optional")

#### RULES ####

# Log all kernel messages to the console.   #将所有内核消息记录到服务台
# Logging much else clutters up the screen.
#kern.*                                                 /dev/console

# Log anything (except mail) of level info or higher.
# Don't log private authentication messages!
*.info;mail.none;authpriv.none;cron.none                /var/log/messages

# The authpriv file has restricted access.
authpriv.*                                              /var/log/secure

# Log all the mail messages in one place.
mail.*                                                  -/var/log/maillog


# Log cron stuff
cron.*                                                  /var/log/cron

# Everybody gets emergency messages
*.emerg                                                 :omusrmsg:*

# Save news errors of level crit and higher in a special file.
uucp,news.crit                                          /var/log/spooler

# Save boot messages also to boot.log
local7.*                                                /var/log/boot.log


# ### sample forwarding rule ###    # 示例转发规则
#action(type="omfwd"  
# An on-disk queue is created for this action. If the remote host is   # 为此操作创建磁盘队列
# down, messages are spooled to disk and sent when it is up again.   # 向下，邮件向磁盘进行假，并在再次启动时发送。
#queue.filename="fwdRule1"       # unique name prefix for spool files
#queue.maxdiskspace="1g"         # 1gb space limit (use as much as possible)
#queue.saveonshutdown="on"       # save messages to disk on shutdown
#queue.type="LinkedList"         # run asynchronously
#action.resumeRetryCount="-1"    # infinite retries if host is down
# Remote Logging (we use TCP for reliable delivery)   # 远程日志，使用TCP传输
# remote_host is: name/ip, e.g. 192.168.0.1, port optional e.g. 10514
#Target="remote_host" Port="XXX" Protocol="tcp")

以上是配置文件内容
下一步就是关闭防火墙
systemctl restart rsyslog # 重启rsyslog服务
systemctl enable rsyslog # 设置开机运行rsyslog
netstat -pnltu # 确认服务器是否监听514端口

tail -f /var/log/messages # 实时查看日志消息







=========================================================================================================================================

====================================rsyslog客户端配置====================================
